<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Update Schemas with a Data Package — import_schemas • skyscraper</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Update Schemas with a Data Package — import_schemas" />
<meta property="og:description" content="Instantiate or Update any of the Postgres schemas governed by the skyscraper Package with the data found in its corresponding Data Package. The map from the skyscraper schema to its Data Package Repository is stored and maintained by load_schema_map.
Instantiate or Update any of the Postgres schemas governed by the skyscraper Package with the data found in its corresponding Data Package. The map from the skyscraper schema to its Data Package Repository is stored and maintained by load_schema_map." />
<meta property="og:image" content="/logo.png" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">skyscraper</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.3.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/meerapatelmd/skyscraper/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Update Schemas with a Data Package</h1>
    <small class="dont-index">Source: <a href='https://github.com/meerapatelmd/skyscraper/blob/master/R/local_maintenance_functions.R'><code>R/local_maintenance_functions.R</code></a></small>
    <div class="hidden name"><code>update_schemas.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Instantiate or Update any of the Postgres schemas governed by the skyscraper Package with the data found in its corresponding Data Package. The map from the skyscraper schema to its Data Package Repository is stored and maintained by <code><a href='load_schema_map.html'>load_schema_map</a></code>.</p>
<p>Instantiate or Update any of the Postgres schemas governed by the skyscraper Package with the data found in its corresponding Data Package. The map from the skyscraper schema to its Data Package Repository is stored and maintained by <code><a href='load_schema_map.html'>load_schema_map</a></code>.</p>
    </div>

    <pre class="usage"><span class='fu'>import_schemas</span><span class='op'>(</span><span class='va'>conn</span>, <span class='va'>schemas</span>, all <span class='op'>=</span> <span class='cn'>FALSE</span>, force_update <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>

<span class='fu'>update_schemas</span><span class='op'>(</span><span class='va'>conn</span>, <span class='va'>schemas</span>, all <span class='op'>=</span> <span class='cn'>FALSE</span>, force_update <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>conn</th>
      <td><p>Postgres connection</p></td>
    </tr>
    <tr>
      <th>schemas</th>
      <td><p>Character vector of length 1 or more of the schemas to update</p></td>
    </tr>
    <tr>
      <th>all</th>
      <td><p>If TRUE, all the skyscraper schemas will be updated and the <code>schemas</code> argument is ignored. Default: FALSE</p></td>
    </tr>
    <tr>
      <th>force_update</th>
      <td><p>If TRUE, the Data Package repository is force-installed and the schema is dropped and repopulated without checking for a difference. Default: FALSE</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>Postgres schemas are dropped and repopulated with data found in the corresponding Data Package.</p>
<p>Postgres schemas are dropped and repopulated with data found in the corresponding Data Package.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>This function operates on the dataframe returned by <code><a href='load_schema_map.html'>load_schema_map</a></code>. This dataframe is then filtered for the <code>schemas</code> argument, if provided, or is otherwise run to completion on all schemas. Since this function cascade drops a schema before repopulating it with package data, the arguments are structured in such a way that a user has to call for a complete refresh of all possible schemas by setting the <code>all</code> argument to <code>TRUE</code> in order to prevent data loss due to bugs.</p>
<p>The Namespace for all the Data Packages are unloaded at the start of execution to prevent the wrong Data Package from being loaded into the wrong schema since the dataframe names are duplicated across packages. Without a forced update, the corresponding Data Package is first installed only if there is a new version of the package detected when installing from GitHub. The fresh install of the Data Package is loaded, all columns with a "datetime" string match are converted to "POSIXct" "POSIXt", and then populates the schema after the present schema is dropped. In a forced update, the corresponding Data Package is force-installed and the schema is dropped and refreshed regardless of whether or not a difference has been detected in the Data Package GitHub repo.</p>
<p>This function operates on the dataframe returned by <code><a href='load_schema_map.html'>load_schema_map</a></code>. This dataframe is then filtered for the <code>schemas</code> argument, if provided, or is otherwise run to completion on all schemas. Since this function cascade drops a schema before repopulating it with package data, the arguments are structured in such a way that a user has to call for a complete refresh of all possible schemas by setting the <code>all</code> argument to <code>TRUE</code> in order to prevent data loss due to bugs.</p>
<p>The Namespace for all the Data Packages are unloaded at the start of execution to prevent the wrong Data Package from being loaded into the wrong schema since the dataframe names are duplicated across packages. Without a forced update, the corresponding Data Package is first installed only if there is a new version of the package detected when installing from GitHub. The fresh install of the Data Package is loaded, all columns with a "datetime" string match are converted to "POSIXct" "POSIXt", and then populates the schema after the present schema is dropped. In a forced update, the corresponding Data Package is force-installed and the schema is dropped and refreshed regardless of whether or not a difference has been detected in the Data Package GitHub repo.</p>
    <h2 class="hasAnchor" id="update-schemas"><a class="anchor" href="#update-schemas"></a>Update Schemas</h2>

    

<p>Checking Schema Status is not a required prerequisite to update skyscraper schemas. However, if the status is checked before running an update, the update needs to be run with force_update set to <code>TRUE</code> since the execution of the update occurs on the condition of requiring a new installation, which the <code><a href='schema_status.html'>schema_status</a></code> would have already executed.</p>

<p>Checking Schema Status is not a required prerequisite to update skyscraper schemas. However, if the status is checked before running an update, the update needs to be run with force_update set to <code>TRUE</code> since the execution of the update occurs on the condition of requiring a new installation, which the <code><a href='schema_status.html'>schema_status</a></code> would have already executed.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='https://meerapatelmd.github.io/rubix/reference/filter_for.html'>filter_for</a></code>,<code><a href='https://meerapatelmd.github.io/rubix/reference/map_names_set.html'>map_names_set</a></code>
<code><a href='https://purrr.tidyverse.org/reference/map.html'>map</a></code>,<code><a href='https://purrr.tidyverse.org/reference/map2.html'>map2</a></code>
<code><a href='https://rdrr.io/r/utils/capture.output.html'>capture.output</a></code>
<code><a href='https://devtools.r-lib.org//reference/remote-reexports.html'>remote-reexports</a></code>
<code><a href='https://meerapatelmd.github.io/pg13/reference/dropSchema.html'>dropSchema</a></code>,<code><a href='https://meerapatelmd.github.io/pg13/reference/createSchema.html'>createSchema</a></code>,<code><a href='https://meerapatelmd.github.io/pg13/reference/writeTable.html'>writeTable</a></code>
<code><a href='https://dplyr.tidyverse.org/reference/mutate_all.html'>mutate_all</a></code>
<code><a href='http://lubridate.tidyverse.org/reference/ymd_hms.html'>ymd_hms</a></code></p>
<p><code><a href='https://meerapatelmd.github.io/rubix/reference/filter_for.html'>filter_for</a></code>,<code><a href='https://meerapatelmd.github.io/rubix/reference/map_names_set.html'>map_names_set</a></code>
<code><a href='https://purrr.tidyverse.org/reference/map.html'>map</a></code>,<code><a href='https://purrr.tidyverse.org/reference/map2.html'>map2</a></code>
<code><a href='https://rdrr.io/r/utils/capture.output.html'>capture.output</a></code>
<code><a href='https://devtools.r-lib.org//reference/remote-reexports.html'>remote-reexports</a></code>
<code><a href='https://meerapatelmd.github.io/pg13/reference/dropSchema.html'>dropSchema</a></code>,<code><a href='https://meerapatelmd.github.io/pg13/reference/createSchema.html'>createSchema</a></code>,<code><a href='https://meerapatelmd.github.io/pg13/reference/writeTable.html'>writeTable</a></code>
<code><a href='https://dplyr.tidyverse.org/reference/mutate_all.html'>mutate_all</a></code>
<code><a href='http://lubridate.tidyverse.org/reference/ymd_hms.html'>ymd_hms</a></code></p>
<p>Other local maintenance: 
<code><a href='export_schema_to_data_repo.html'>export_schema_to_data_repo</a>()</code>,
<code><a href='load_schema_map.html'>load_schema_map</a>()</code>,
<code><a href='schema_status.html'>schema_status</a>()</code></p>
<p>Other local maintenance: 
<code><a href='export_schema_to_data_repo.html'>export_schema_to_data_repo</a>()</code>,
<code><a href='load_schema_map.html'>load_schema_map</a>()</code>,
<code><a href='schema_status.html'>schema_status</a>()</code></p></div>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Meera Patel, MD.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


